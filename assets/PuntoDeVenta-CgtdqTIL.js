import{s as y}from"./index-DfNuqxmo.js";import{s as I}from"./index-BmWv4d91.js";import{s as C}from"./index-noSO5Fc6.js";import{s as x}from"./index-CRhetppk.js";import{s as V}from"./index-C54YviYe.js";import{s as k}from"./index-Tp5f2bvP.js";import{s as w}from"./index-DQ3zd5K5.js";import{_ as N,j as T,r as b,a as D,c as L,d as i,b as e,e as l,g as v,t as f,s as F}from"./index-COyfQsJ6.js";import"./index-ZHC5otyF.js";import"./index-vxDxhLnY.js";import"./index-DKsINwdU.js";import"./index-zRYqJO7N.js";import"./index-DrcaFZFO.js";import"./index-gM4L4YLK.js";import"./index-mxWeEZS2.js";import"./index-CbTi5LjG.js";import"./index-DLEJXGlU.js";import"./index-ClClmSvv.js";import"./index-DYCz6NL0.js";import"./index-B0XQe3lk.js";import"./index-CjnFK0hq.js";import"./index-CmXIaCgq.js";import"./index-Cza7MN4i.js";import"./index-N4HGSaKQ.js";const E={data(){const c=T(),o=b(!1),P=b(!1),h=b(""),t=b(""),s=b(""),u=b("");function d(r,U){console.log("Row Index recibido:",parseInt(r.cns-1)),h.value=r.cns-1,t.value=r.nomProducto,s.value=r.cantidad,u.value=r.precioUnitario,console.log("boton actualizar"),o.value=!0}async function m(){const r=parseInt(h.value);console.log("Índice:",r),console.log(r),r!==-1&&r<this.tablaCompras.length?(this.tablaCompras[r]={cns:r+1,nomProducto:t.value,cantidad:parseFloat(s.value),precioUnitario:parseFloat(u.value),precioParcial:parseFloat(s.value)*parseFloat(u.value)},this.toast.add({severity:"success",summary:"Actualizado",detail:"Producto actualizado correctamente",life:3e3})):console.log("error"),this.visibleUpdate=!1}function _(r){h.value=r.cns-1,console.log("eliminar: ",r.cns-1),P.value=!0}async function p(){const r=parseInt(h.value);console.log("delete: ",r),r!==-1&&r<this.tablaCompras.length?(this.tablaCompras.splice(r,1),this.tablaCompras.forEach((U,a)=>{U.cns=a+1}),c.add({severity:"success",summary:"Eliminado",detail:"Producto eliminado",life:3e3})):console.log("error a eliminar"),P.value=!1}async function g(){if(console.log("Nomp: ",this.productoItem.nomProducto),console.log("Cantidad: ",this.productoItem.cantidad),console.log("Precio Unitario:",this.productoItem.precioUnitario),!this.productoItem.nomProducto||this.productoItem.nomProducto.trim()===""||!this.productoItem.cantidad||this.productoItem.cantidad.trim()===""||!this.productoItem.precioUnitario||this.productoItem.precioUnitario.trim()===""||isNaN(this.productoItem.cantidad)||isNaN(this.productoItem.precioUnitario)){c.add({severity:"warn",summary:"Advertencia",detail:"Todos los campos son obligatorios y deben ser números válidos",life:3e3});return}this.tablaCompras.push({cns:this.tablaCompras.length+1,nomProducto:this.productoItem.nomProducto,cantidad:parseFloat(this.productoItem.cantidad),precioUnitario:parseFloat(this.productoItem.precioUnitario),precioParcial:parseFloat(this.productoItem.cantidad)*parseFloat(this.productoItem.precioUnitario)}),this.productoItem.nomProducto="",this.productoItem.precioUnitario="",this.productoItem.cantidad="",t.value="",s.value="",u.value="",c.add({severity:"success",summary:"Confirmación",detail:"Nueva compra registrada",life:3e3})}return{registrarCompra:g,toast:c,nomp:t,cantidad:s,precioUnitario:u,visibleDelete:P,visibleUpdate:o,editarProducto:d,deleteProducto:p,updateProducto:m,eliminarProducto:_,tablaCompras:[{cns:1,nomProducto:"Impresora LaserJet Color",cantidad:2,precioUnitario:5200,precioParcial:10400},{cns:2,nomProducto:"Monitor LED 31 plg.",cantidad:3,precioUnitario:1700,precioParcial:5100}],productoItem:{cns:null,nomProducto:null,cantidad:null,precioUnitario:null,precioParcial:null}}},created(){},methods:{formatoMoneda(c){return c?c.toLocaleString("en-US",{style:"currency",currency:"USD"}):"$0.00"}},computed:{subtotal(){return this.tablaCompras.reduce((c,o)=>c+o.precioParcial,0)},iva(){return this.subtotal*.16},totalTotal(){return this.subtotal+this.iva}}},z={class:"p-grid"},A={class:"p-col-12"},M={class:"card"},R=e("br",null,null,-1),S={class:"flex gap-2"},B={class:"flex-auto"},O=e("label",{for:"nomp"},[e("strong",null,"Nombre del producto: ")],-1),q={class:"flex-auto"},j=e("label",{for:"precioUnitario"},[e("strong",null,"Precio Unitario: ")],-1),J={class:"flex-auto"},K=e("label",{for:"cantidad"},[e("strong",null,"Cantidad: ")],-1),G=e("br",null,null,-1),H=e("p",null,[e("br")],-1),Q=e("br",null,null,-1),W=e("h4",null,"Resumen de Compra",-1),X={class:"p-d-flex p-ai-center"},Y={class:"p-mr-4"},Z=e("strong",null,"Subtotal:",-1),$={class:"p-mr-4"},oo=e("strong",null,"IVA (16%):",-1),to=e("strong",null,"Total:",-1);function eo(c,o,P,h,t,s){const u=F,d=w,m=k,_=V,p=x,g=C,r=I,U=y;return D(),L("div",z,[i(u),e("div",A,[e("div",M,[i(U,{header:"PUNTO DE VENTA (POS)",style:{height:"100%"}},{default:l(()=>[i(_,{class:"p-mb-4"},{start:l(()=>[i(d,{type:"text",size:"40",placeholder:"Nombre del producto...",modelValue:t.productoItem.nomProducto,"onUpdate:modelValue":o[0]||(o[0]=a=>t.productoItem.nomProducto=a)},null,8,["modelValue"]),i(d,{class:"ml-8",type:"text",placeholder:"Cant",modelValue:t.productoItem.cantidad,"onUpdate:modelValue":o[1]||(o[1]=a=>t.productoItem.cantidad=a)},null,8,["modelValue"]),i(d,{class:"ml-8",type:"text",placeholder:"$ Precio U.",modelValue:t.productoItem.precioUnitario,"onUpdate:modelValue":o[2]||(o[2]=a=>t.productoItem.precioUnitario=a)},null,8,["modelValue"])]),end:l(()=>[i(m,{label:"Registrar",icon:"pi pi-plus",class:"p-button-success p-mr-2",onClick:o[3]||(o[3]=a=>t.registrarCompra())})]),_:1}),R,i(r,{value:t.tablaCompras,selection:t.productoItem,"onUpdate:selection":o[11]||(o[11]=a=>t.productoItem=a),class:"p-datatable-gridlines",dataKey:"cns",rows:5,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Visualizando {last} de {totalRecords} productos",style:{"margin-bottom":"20px"},paginator:!0,responsiveLayout:"scroll"},{default:l(()=>[i(p,{field:"cns",header:"Cns",sortable:!0,style:{width:"50px"}}),i(p,{field:"nomProducto",header:"Nombre del Producto",style:{width:"370px"}}),i(p,{field:"precioUnitario",header:"Precio U.",dataType:"numeric",style:{width:"80px"}},{body:l(a=>[v(f(s.formatoMoneda(a.data.precioUnitario)),1)]),_:1}),i(p,{field:"cantidad",header:"Cant.",style:{width:"60px","text-align":"center"}}),i(p,{field:"precioParcial",header:"Precio P.",style:{width:"80px"}},{body:l(a=>[v(f(s.formatoMoneda(a.data.precioParcial)),1)]),_:1}),i(p,{style:{width:"140px"}},{header:l(()=>[v(" Acciones ")]),body:l(a=>[i(m,{icon:"pi pi-pencil",type:"button",class:"p-button-success p-mr-2 p-mb-1",onClick:n=>t.editarProducto(a.data,a.rowIndex)},null,8,["onClick"]),i(g,{visible:t.visibleUpdate,"onUpdate:visible":o[8]||(o[8]=n=>t.visibleUpdate=n),modal:"",header:"Actualizar datos de un producto",style:{width:"45vw"}},{footer:l(()=>[i(m,{label:"Actualizar",icon:"pi pi-replay",onClick:o[7]||(o[7]=n=>t.updateProducto())})]),default:l(()=>[e("p",null,[e("div",S,[e("div",B,[O,i(d,{class:"ml-2",id:"nomp",modelValue:t.nomp,"onUpdate:modelValue":o[4]||(o[4]=n=>t.nomp=n)},null,8,["modelValue"])]),e("div",q,[j,i(d,{class:"ml-2",id:"precioUnitario",modelValue:t.precioUnitario,"onUpdate:modelValue":o[5]||(o[5]=n=>t.precioUnitario=n)},null,8,["modelValue"])]),e("div",J,[K,i(d,{class:"ml-2",id:"cantidad",modelValue:t.cantidad,"onUpdate:modelValue":o[6]||(o[6]=n=>t.cantidad=n)},null,8,["modelValue"])])]),G])]),_:1},8,["visible"]),i(m,{icon:"pi pi-trash",type:"button",class:"p-button-danger p-mb-1",onClick:n=>t.eliminarProducto(a.data)},null,8,["onClick"]),i(g,{visible:t.visibleDelete,"onUpdate:visible":o[10]||(o[10]=n=>t.visibleDelete=n),modal:"",header:"Estas seguro que quieres borrar este producto?",style:{width:"30vw"}},{footer:l(()=>[i(m,{label:"Eliminar",severity:"warning",icon:"pi pi-check",onClick:o[9]||(o[9]=n=>t.deleteProducto()),autofocus:""})]),default:l(()=>[H]),_:1},8,["visible"])]),_:1})]),_:1},8,["value","selection"]),Q,i(_,{class:"p-mb-4"},{start:l(()=>[W]),end:l(()=>[e("div",X,[e("div",Y,[Z,v(" "+f(s.formatoMoneda(s.subtotal)),1)]),e("div",$,[oo,v(" "+f(s.formatoMoneda(s.iva)),1)]),e("div",null,[to,v(" "+f(s.formatoMoneda(s.totalTotal)),1)])])]),_:1})]),_:1})])])])}const wo=N(E,[["render",eo]]);export{wo as default};
